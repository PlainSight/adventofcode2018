var input = '|...||..|....|..#..|.|..#.|......#|.||.||.|..|....\r\n.#.....#....#|||#|#..||..|.#..|....#...||.#.#|.|.|\r\n.|...|#..|||..|.#....#..|.|....|...||...#.#|...|#.\r\n.........|.|.#||.##.#|.||.|#..||..||...##.##......\r\n..|.||.#.|.|.|....||#.....|.|.||##.#|##.|....|.#..\r\n#..#|#..|#...|...#...#....#|##......#..|||#..#.#..\r\n...#.#.#|...||...|.#...||#.....|##|||.....#.#.#.|.\r\n.#..|.###|#.|.##......||..#...#.#..|#.|.##.#.#.|..\r\n..||.|.|.....###...#|...###..##|.#.#....#|..##.|.|\r\n.##..#.|.#....##...||.|#..#.####..|#..##.|...#....\r\n..#...#|..|..|.|.#|#.|.|..|..||......#|.|...##..|.\r\n..||...##|#.....#|..|..|.|.##.|.##.|#|.##|.||...#.\r\n..|.||......#...#......|......|.##...|..|.|.#...#.\r\n||#.#|...#.......#......|..|#.#.|.....#...#.|##..|\r\n.....||.|..|##.#|..#..#|..#|.##....##|.##.||...###\r\n#|..#..#....|...|.|....#.##...#..|.|..#........|#|\r\n....#.|.....##.|..##.....##..#.....|#.|.#.|.#.###.\r\n...###........|.....|..|#..#..|##..###.....#||..||\r\n#.#...#|..##...|..|||#.....|#|.......#..#.......#|\r\n#.....||||.#..##.|..|#|.#..|.......|##.|#|#....#.|\r\n#..##|...|....#.#.#.||.|..|.....#|...|....#|..##|#\r\n#..|||#..#..|..#|....#.........#...#...#...|.|...#\r\n.........|.|...#...|...#|##..#.....#.|.#..||.#...#\r\n.|#...#|...#.###.|#.||.|..#..#.####..#..||.#.#|..|\r\n.|#....||#|#|.|.|#....##..||.##|....#....#||...|.|\r\n...|....|...|.||#...#...........#..#....##|.#....|\r\n....#|#..#....|##...#..|#..#.|......|#........|#..\r\n.|..#...|..#.|.#....#....#.|...#..|........|..|...\r\n...##|....||...##...|......|#..|..#..|.........##.\r\n..##.|.#..........##.|....|##|.....|.#.#.|.....|.#\r\n#|.|.......#|..#..#.#.|..|.|.#.||#.#...|.#..|.....\r\n||.#............#...|...#..|#|..||##...#.|#|##|.#|\r\n..|..||####.|....|##.#.|...|||#..|.|.|.........##.\r\n...|....|..||.#..##||.|||#..|..#...#.##...||.|..||\r\n....|...|##...#|.|.|..#|..|#|..##.|....||..|.|.||.\r\n#..#.......|.#..#..||...#|..#.....#|#..|..|...##..\r\n#...#..##..|.#...#.....|......###|..|...||.....|..\r\n#.|..#..|#..|#|..#..||#......|#.......|.#....###..\r\n#...#||...##|.#.#|####|...|......|.#.#..|#.##...|.\r\n|.#..#....#..#.....|#..|#.|..##.#..|#|##........||\r\n#.........##..|....|#.........||..||##...||.|..|.|\r\n.#....#.......#..|#.|...|....#.#.#........##.##.|.\r\n.#.#..|.|#..|..#..###...|.#......|.|#.|.##..|.|##.\r\n..||..|.##.##|...|....#||##....#..#.|#|.|#||#..|..\r\n.......#|#||.....|.||.|##..|.|....|....|.#...#..|.\r\n#||##|.||..|##.|..|#.#.|.|....#|.#|.....|||..#.||.\r\n.||#.|#...||#.#..#..|.|#.....#.#.|#.|...#..#...#..\r\n#........|..#...|#..###.|.#|...#..#...........#.|#\r\n.|...#|....||.|...#.|..|.||##.|..#|.#|..|.#....#..\r\n||....###...#...|||.||..#.|.....||.#|..###..|....#';

//var input = '.#.#...|#.\r\n.....#|##|\r\n.|..|...#.\r\n..|#.....#\r\n#.#|||#|#|\r\n...#.||...\r\n.|....|...\r\n||...#|.#|\r\n|.||||..|.\r\n...#.|..|.';

var inputLines = input.split('\r\n');

var dim = inputLines.length;

var land = [];

function xyi(x, y) {
	return x + y*dim;
}

for(var i = 0; i < inputLines.length; i++) {
	for(var c = 0; c < inputLines[i].length; c++) {
		land[xyi(c, i)] = inputLines[i][c];
	}
}

function minb(x) {
	if (x-1 < 0) {
		return 0;
	} else {
		return x-1;
	}
}

function maxb(x) {
	if (x+1 >= dim) {
		return dim-1;
	} else {
		return x+1;
	}
}

function print(m) {
	var trees = 0;
	var lumberYards = 0;

	for(var x = 0; x < dim; x++) {
		for(var y = 0; y < dim; y++) {
			switch(land[xyi(x, y)]) {
				case '|':
					trees++;
					break;
				case '#':
					lumberYards++;
					break;
			}
		}
	}
	
	console.log('minutes: ' + m + 'value: ' + trees*lumberYards);
	for(var l = 0; l < dim; l++) {
		console.log(land.slice(l*dim, (l+1)*dim).join(''));
	}
}

for(var m = 0; m < 1000000000; m++) {
	if(m % 100 == 0) {
		print(m);
	}
	
	var nextLand = [];
	
	for(var x = 0; x < dim; x++) {
		for(var y = 0; y < dim; y++) {
			var openGround = 0;
			var trees = 0;
			var lumberYards = 0;
			var current = land[xyi(x, y)];
			
			for(var dx = minb(x); dx <= maxb(x); dx++) {
				for(var dy = minb(y); dy <= maxb(y); dy++) {
					if (dx != x || dy != y) {
						switch(land[xyi(dx, dy)]) {
							case '.':
								openGround++;
								break;
							case '|':
								trees++;
								break;
							case '#':
								lumberYards++;
								break;
						}
					}
				}
			}
			
			switch(current) {
				case '.':
					if (trees >= 3) {
						nextLand[xyi(x, y)] = '|';
					} else {
						nextLand[xyi(x, y)] = '.';
					}
					break;
				case '|':
					if (lumberYards >= 3) {
						nextLand[xyi(x, y)] = '#';
					} else {
						nextLand[xyi(x, y)] = '|';
					}
					break;
				case '#':
					if (trees >= 1 && lumberYards >= 1) {
						nextLand[xyi(x, y)] = '#';
					} else {
						nextLand[xyi(x, y)] = '.';
					}
					break;
			}
		}
	}

	land = nextLand;
}

print();

